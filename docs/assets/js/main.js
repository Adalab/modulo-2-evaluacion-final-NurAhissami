"use strict";console.log(">> Ready :)");const savedSeries=JSON.parse(localStorage.getItem("favoritesSeries")),inputForm=document.querySelector(".js-input"),btn=document.querySelector(".js-button"),containerSeries=document.querySelector(".js-containList"),listSeries=document.querySelector(".js-series-list"),listFavoriteSeries=document.querySelector(".js-favorite-list"),inputSeries=document.querySelector(".js-input-name");btn.addEventListener("click",findSeries);let globalData=[];function findSeries(){const e=inputSeries.value;globalData=[],fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{if(e.forEach(e=>{globalData.push(e.show)}),globalData.length>0)printShowCards(globalData);else{const e=document.createElement("p"),t=document.createTextNode("no se ha encontrado ninguna pelicula");e.appendChild(t),containerSeries.appendChild(e)}})}function printShowCards(e){let t="";e.forEach(e=>{let s="";s=null==e.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e.image.medium,t+=`<li id="${e.id}" class="showCard js-favorite"><img class="image" src="${s}" alt="${e.name}"></img><h3 class="title">${e.name}</h3> </li>`}),listSeries.innerHTML=t,addListenersToCards()}function addListenersToCards(){const e=document.querySelectorAll(".js-favorite");for(const t of e)t.addEventListener("click",updateFavoriteList)}addListenersToCards();let favoritesShow=[];function updateFavoriteList(e){const t=e.target;let s="",a=!1;""==t.id?(s=t.parentElement.id,a=!0):(s=t.id,a=!1);const i=favoritesShow.find(e=>e.id===parseInt(s));if(null==i){const e=globalData.find(e=>e.id===parseInt(s));favoritesShow.push(e),a?(t.parentElement.classList.add("showfavCard"),t.parentElement.classList.remove("showCard")):(t.classList.add("showfavCard"),t.classList.remove("showCard"))}else{let e=favoritesShow.indexOf(i);favoritesShow.splice(e,1),a?(t.parentElement.classList.add("showCard"),t.parentElement.classList.remove("showfavCard")):(t.classList.add("showCard"),t.classList.remove("showfavCard"))}localStorage.setItem("favoritesSeries",JSON.stringify(favoritesShow)),printFavoriteList(favoritesShow)}function printFavoriteList(e){let t="";e.forEach(e=>{let s="";s=null==e.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e.image.medium,t+=`<li class="favoriteCard "><img src="${s}" alt="${e.name}"></img>${e.name}<button type="button" class="buttonX js-btnremove">X</button>\n    </li>`}),listFavoriteSeries.innerHTML=t}function removeFavoriteList(e){let t=favoritesShow.indexOf(e);favoritesShow.splice(t,1)}savedSeries&&(favoritesShow=savedSeries),printFavoriteList(favoritesShow);