"use strict";console.log(">> Ready :)");const savedSeries=JSON.parse(localStorage.getItem("favoritesSeries")),form=document.querySelector(".js-input"),containerSeries=document.querySelector(".js-containList"),listSeries=document.querySelector(".js-series-list"),listFavoriteSeries=document.querySelector(".js-favorite-list"),inputSeries=document.querySelector(".js-input-name"),btnRemove=document.querySelector(".js-btnremove");form.addEventListener("submit",findSeries);let globalData=[];function findSeries(e){e.preventDefault();const t=inputSeries.value;t&&(globalData=[],fetch("http://api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{if(e.forEach(e=>{globalData.push(e.show)}),globalData.length>0)printShowCards(globalData);else{const e=document.createElement("p"),t=document.createTextNode("no se ha encontrado ninguna pelicula");e.appendChild(t),containerSeries.appendChild(e)}}))}function printShowCards(e){let t="";e.forEach(e=>{let i="";i=null==e.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e.image.medium;const a=favoritesShow.find(t=>t.id===e.id)?"showfavCard":"showCard";t+=`<li id="${e.id}" class="${a} js-favorite"><img class="image" src="${i}" alt="${e.name}"></img><h3 class="title">${e.name}</h3> </li>`}),listSeries.innerHTML=t,addListenersToCards()}function addListenersToCards(){const e=document.querySelectorAll(".js-favorite");for(const t of e)t.addEventListener("click",updateFavoriteList)}addListenersToCards();let favoritesShow=[];function updateFavoriteList(e){const t=e.currentTarget;let i=e.currentTarget.id;const a=favoritesShow.find(e=>e.id===parseInt(i));if(null==a){const e=globalData.find(e=>e.id===parseInt(i));favoritesShow.push(e),t.classList.add("showfavCard"),t.classList.remove("showCard")}else{let e=favoritesShow.indexOf(a);favoritesShow.splice(e,1),t.classList.add("showCard"),t.classList.remove("showfavCard")}localStorage.setItem("favoritesSeries",JSON.stringify(favoritesShow)),printFavoriteList(favoritesShow)}function printFavoriteList(e){if(!Array.isArray(e))return;let t="";e.forEach(e=>{let i="";i=null==e.image?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":e.image.medium,t+=`<li class="favoriteCard"><img class="image-fav" src="${i}" alt="${e.name}"></img><h3 class="titleFav">${e.name}</h3><button type="button" class="buttonX js-btnremove" data-id="${e.id}">X</button>\n    </li>`}),listFavoriteSeries.innerHTML=t}function removeFavoriteList(e){let t=favoritesShow.indexOf(e);favoritesShow.splice(t,1)}savedSeries&&(favoritesShow=savedSeries),printFavoriteList(favoritesShow),listFavoriteSeries.addEventListener("click",(function(e){if("button"===e.target.type){const t=e.target.getAttribute("data-id");removeFavoriteList(favoritesShow.find(e=>e.id===parseInt(t))),printFavoriteList(favoritesShow),printShowCards(globalData),localStorage.setItem("favoritesSeries",JSON.stringify(favoritesShow))}}));